# 카프카
- 퍼블리서(발행자) ==> 서브스크라이버..(구독자) 
## 메시지큐 
- 비동기
- 디커블링
- Scalability (확장성, 축소에 용이)
## 카프카 vs 래빗엠큐
- 래빗엠큐는 라우팅 키가 있음. (휘발성 데이터)
- 카프카는 토픽/파티션(1:N) 이 존재 - 같은 파티션 내의 메시지 시간보장됨.
- -> 카프카 클러스터는 최소 세 개 이상의 브로커(카프구성서버)를 통해 가용하라는 것이 권장사항
- 각 토픽에 리더 파티션이 하나씩 존재 / 나머지는 팔로우 파티션
### 카프카 요소
- 브로커 들의 장애를 감지 -> 리더 지위를 넘겨주기도 함. 
#### 코디네이터 
- 컨슈머 그룹의 장애를 감지. -> 장애가 발생하지 않은 컨슈머로 대신 작업 가능하도록
#### 컨슈머
- 파티션/컨슈머(N:1) 관계
- 파티션이 컨슈머 별로 오프셋을 관리하여 각 컨슈머가 어디까지 읽었는지 파악 가능 

#### 에크 (ACK)
- 0 인 경우 : Producer -> Leader Partition에 전송 후 응답값 받지 않음.. 
- 1 인 경우 : Producer -> Leader Partition에 전송 후 Leader Partition의 응답 받음
- all 인 경우 : Producer -> Leader Partition에 전송 후 Replication 정상 응답까지 기다림
#### 카프카 특징
- disk i/o
- page cache를 통하여 성능 개선
- 데이터 전송을 배치처리
#### 카프카 스트림즈
- 카프카 내부 파이프라인